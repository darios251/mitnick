#{extends 'admin.html' /}

#{js 'jquery-1.9.1.js', output:'all'/}

<script>

function goodToBuy(site, order, orderBy){		
	var goodToBuyURL = #{jsRoute @OutputResultGenerator.goodToBuy(':site') /};
	var jqxhr = $.ajax({
      url: goodToBuyURL.url({site: site}),
      type: 'goodToBuy.method'
    }).done(function(data){
    	
    });
}

</script>
#{form action:@listResult().add('order', order ).add('orderBy', orderBy), method:'GET'}
	<form class="advancedSearch">
		<div>
			&{'result.filter.inGoogle'} <select name="inGoogle" id="inGoogle">
			  <option value="&{'result.filter.selectOption'}">&{'result.filter.selectOption'}</option>
			  <option value="&{'result.filter.yes'}">&{'result.filter.yes'}</option>
			  <option value="&{'result.filter.no'}">&{'result.filter.no'}</option>
			</select>
			
			&{'result.filter.www'} <select name="www" id="www">
			  <option value="&{'result.filter.selectOption'}">&{'result.filter.selectOption'}</option>
			  <option value="&{'result.filter.y'}">&{'result.filter.y'}</option>
			  <option value="&{'result.filter.n'}">&{'result.filter.n'}</option>
			</select>

			&{'result.filter.pr'}<input type="text" name="pr" value="${pr}" />
		</div>
		<div>
			&{'result.filter.refDomains'}<input type="text" name="refDomians" value="${refDomians}" />
			&{'result.filter.refIp'}<input type="text" name="refips" value="${refips}" />
			&{'result.filter.refSubnet'}<input type="text" name="refsubnet" value="${refsubnet}" />
		</div>		
		<div>
			&{'result.filter.extbackLinksEdu'}<input type="text" name="extlinksedu" value="${extlinksedu}" />
			&{'result.filter.redDomainsEdu'}<input type="text" name="refdomainedu" value="${refdomainedu}" />
			&{'result.filter.extBackLinksGov'}<input type="text" name="extbacklinksgov" value="${extbacklinksgov}" />
		</div>
		<div>
			&{'result.filter.refDomiansGov'}<input type="text" name="refdomiansgov" value="${refdomiansgov}" />
			&{'result.filter.refDomainsHome'}<input type="text" name="refdomainshome" value="${refdomainshome}" />
			&{'result.filter.percentHomepage'}<input type="text" name="percenttoh" value="${percenttoh}" />
		</div>		
	</form>
	
	
	<input type="submit" value="&{'crud.search'}" /> &{'result.filter.leyend.example'}


<div id="resultList" class="result">

    <h2 id="resultListTitle">Domain Analysis Result</h2>

	<table>
		<thead>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','site')}">Domain</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','pr')}">Page Rank</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','ingoogle')}">In Google</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','www')}">WWW</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','refdomain')}">Ref Domians</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','refips')}">Ref Ips</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','refsubnet')}">Ref Subnets</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','extlinksedu')}">Ext Back Links Edu</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','refdomainedu')}">Ref Domans Edu</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','extbacklinksgov')}">Ext Back links Gov</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','refdomiansgov')}">Ref Domains Gov</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','refdomainshome')}">Ref Domains Home</a></th>
			<th><a href="@{listResult().add('order',(order == 'DESC' ? 'ASC' : 'DESC')).add('orderBy','percenttoh')}">Percent To Homepage</a></th>	
			<th>Good to Buy</th>		
			<th></th>			
		</thead>
		<tbody>
			#{list results, as:'result'}
			<tr>
				  <td>&{result.site}</td>
				  <td>&{result.pr}</td>
				  <td>&{result.inGoogle}</td>
				  <td>&{result.www}</td>
				  <td>&{result.refDomians}</td>
				  <td>&{result.refIps}</td>
				  <td>&{result.refSubNet}</td>
				  <td>&{result.extBackLnksEdu}</td>
				  <td>&{result.refDomainsEdu}</td>
				  <td>&{result.extBackLinksGov}</td>
				  <td>&{result.refDomainsGov}</td>				  
				  <td>&{result.refDomianHome}</td>
				  <td>&{result.percentToHome}</td>
				  <td><input type="checkbox" #{if result.goodToBuy}  checked="true" #{/if} onclick="goodToBuy('${result.site}', '${order}', '${orderBy}');"></td>	
				  <th><a href="@{delete().add('order',order).add('orderBy',orderBy).add('site', result.site)}"><img src="/public/images/delete.gif" alt="Edit"></a></th>			  
			</tr>
			#{/list}
		</tbody>
	</table>

</div>

#{/form}

<script>
if ('${inGoogle}'!='')
	$('#inGoogle option:contains(${inGoogle})').prop('selected', true);
if ('${www}'!='')	
	$('#www option:contains(${www})').prop('selected', true);
</script>